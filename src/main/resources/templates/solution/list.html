<!doctype html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
   <head th:replace="solution/widget/head :: head"></head>
<body>
<!-- tt-mobile menu -->
<nav th:replace="solution/widget/mobile-menu :: m-menu"></nav>
<header th:replace="solution/widget/pc-menu :: p-menu"></header>

<main id="tt-pageContent" class="tt-offset-small">
    <div class="container">
        <div class="tt-tab-wrapper" style="cursor:pointer;">
            <div class="tt-wrapper-inner">
                <ul class="nav nav-tabs pt-tabs-default" role="tablist">
                    <li class="nav-item show" onclick="location.href='/solution/list?min=1&max=10&state=0'">
                        <a class="nav-link active" data-toggle="tab" role="tab"><span>전체</span></a>
                    </li>
                    <li class="nav-item" onclick="location.href='/solution/list?min=1&max=10&state=4'">
                        <a class="nav-link" data-toggle="tab" role="tab"><span>답변완료</span></a>
                    </li>
                    <li class="nav-item" onclick="location.href='/solution/list?min=1&max=10&state=1'">
                        <a class="nav-link" data-toggle="tab" role="tab"><span>답변대기중</span></a>
                    </li>
                </ul>
            </div>
            <div class="tab-content">
                <div class="tab-pane tt-indent-none  show active" role="tabpanel" >
                   <div class="tt-topic-list">
                        <div class="tt-item" th:onclick="onClickList([[${list.id}]]);" th:each="list : ${solutions}">
                            <div class="tt-col-avatar">
                                <svg class="tt-icon">
                                  <use xlink:href="#icon-ava-q"></use>
                                </svg>
                            </div>
                            <div class="tt-col-description">
                                <h6 class="tt-title"><a >
                                    <svg class="tt-icon">
                                      <use xlink:href="#icon-locked"></use>
                                    </svg>
                                    <span th:text="${list.title}">질문제목을 불러올수 없습니다.</span>
                                </a></h6>
                                <div class="row align-items-center no-gutters hide-desktope">
                                    <div class="col-9">
                                        <ul class="tt-list-badge">
                                            <li class="show-mobile">
                                              <a>
                                                <span class="tt-color07 tt-badge" th:if="${list.state == 4}">답변완료</span>
                                                <span class="tt-color04 tt-badge" th:unless="${list.state == 4}">풀이대기</span>
                                              </a>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="col-3 ml-auto show-mobile">
                                       <div class="tt-value"><span th:text="${list.upload_date}">0000-00-00</span></div>
                                    </div>
                                </div>
                            </div>
                            <div class="tt-col-category tt-col-value-large hide-mobile">
                              <span class="tt-color07 tt-badge" th:if="${list.state == 4}" th:text="${list.state.name}">답변완료</span>
                              <span class="tt-color04 tt-badge" th:unless="${list.state == 4}" th:text="${list.state.name}">답변대기</span>
                            </div>
                            <div class="tt-col-category tt-col-value-large hide-mobile">
                              <span class="tt-color07 tt-badge" th:if="${list.review != null}">후기등록</span>
                            </div>
                            <div class="tt-col-value-large hide-mobile"><span th:text="${list.upload_date}">0000-00-00</span></div>
                        </div>

                        <div class="tt-row-btn">
                            <button type="button" class="btn-icon js-topiclist-showmore">
                                <svg class="tt-icon">
                                  <use xlink:href="#icon-load_lore_icon"></use>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>
<script src="../js/bundle.js"></script>
<script>
  function onClickList(id){
    var prompt = window.prompt('패스워드를 입력하세요. ');
    console.log("id : " , id);
    console.log("prompt : " , prompt);
    location.href="/solution/detail/index.html?id="+id;
    $.ajax({
        type : 'POST',
        url : '/solution/login',
        dataType : 'json',
        data : JSON.stringify({
          "id" : id,
          "password" : prompt
        }),
	      contentType : "application/json; charset=UTF-8",
        processData: false,
        success : function(result) {
          // TODO: result
          console.log("result : " ,result);
        },
        error: function(request, status, error) {
          console.log("result : " ,status);
          console.log("error : " ,error);
        }
    }) // End Ajax Request


  }
</script>

<svg th:replace="solution/svg/svg :: svg"></svg>
</body>
</html>
